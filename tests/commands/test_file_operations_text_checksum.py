# Date: 2023-5-13
# Author: Generated by GoCodeo.


import unittest
import hashlib
from unittest.mock import patch
from io import StringIO
from autogpt.commands.file_operations import text_checksum

class TestTextChecksum(unittest.TestCase):

    # Positive test
    def test_text_checksum_valid(self):
        test_text = "Hello, World!"
        expected_checksum = hashlib.md5(test_text.encode("utf-8")).hexdigest()
        self.assertEqual(text_checksum(test_text), expected_checksum)

    # Negative test
    def test_text_checksum_invalid(self):
        test_text = "Hello, World!"
        wrong_checksum = "1234567890abcdef"
        self.assertNotEqual(text_checksum(test_text), wrong_checksum)

    # Edge test
    def test_text_checksum_empty_string(self):
        test_text = ""
        expected_checksum = hashlib.md5(test_text.encode("utf-8")).hexdigest()
        self.assertEqual(text_checksum(test_text), expected_checksum)

    # Error test
    @patch('sys.stderr', new_callable=StringIO)
    def test_text_checksum_non_string_input(self, mock_stderr):
        test_input = 123
        with self.assertRaises(AttributeError):
            text_checksum(test_input)
            self.assertIn("AttributeError", mock_stderr.getvalue())

if __name__ == '__main__':
    unittest.main()